<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="hireNoti">

	
	<insert id="insertNoti" parameterType="hireNoti">
		INSERT INTO HIRENOTI VALUES(HN_Seq.NEXTVAL,#{cMemberId},#{hnSort, typeHandler=strArr},#{hnCareer},#{hnForm},#{hnRecruit},#{hnCate},#{hnChargeTask},#{hnDept},#{hnRankPosition},#{hnFinalEdu, typeHandler=strArr},#{hnMajor},#{hnPreference},#{hnGender},#{hnBirth, typeHandler=strArr},#{hnSal},#{hnWorkPlace},#{hnDay},#{hnStime},#{hnDtime},#{startDate},#{endDate},#{hnEve, typeHandler=strArr},#{hnReMethod},#{hnProcess},#{hnDoc},#{hnInterview},#{hnTitle},sysdate)
	</insert>
	
	<select id="selectAll" resultMap="hireNotiResult">
		SELECT A.*, C.COMPANY_NAME CNAME FROM HIRENOTI A LEFT JOIN C_MEMBER B ON (A.CMEMBERID = B.CMEMBERID) LEFT JOIN COMPANY C ON (B.CID = C.COMPANY_NO) ORDER BY HN_ADDDATE DESC
	</select>
	
	<select id="selectAllAjax"  resultMap="hireNotiResult">
		SELECT A.*, C.COMPANY_NAME CNAME FROM HIRENOTI A LEFT JOIN C_MEMBER B ON (A.CMEMBERID = B.CMEMBERID) LEFT JOIN COMPANY C ON (B.CID = C.COMPANY_NO) WHERE 1=1
		<if test="category!=null and category!=''">
			AND
			<foreach collection="category" item="cate" open="(" close=")" separator="or">
				HN_WORK_PLACE LIKE '%'|| #{cate} ||'%' OR HN_FORM = #{cate} OR HN_SAL = #{cate} OR HN_SORT = #{cate} OR HN_GENDER = #{cate} OR HN_FINAL_EDU = #{cate} OR HN_CAREER = #{cate}
			</foreach>
		</if>
		ORDER BY HN_ADDDATE DESC
	</select>
	
	<select id="selectHireNotiCount" resultType="_int">
		SELECT COUNT(*) FROM HIRENOTI
	</select>
	
	<select id="selectHireNotiCountAjax" resultType="_int">
		SELECT COUNT(*) FROM HIRENOTI WHERE 1=1
		<if test="category!=null and category!=''">
			AND
			<foreach collection="category" item="cate" open="(" close=")" separator="or">
				HN_WORK_PLACE LIKE '%'|| #{cate} ||'%' OR HN_FORM = #{cate} OR HN_SAL = #{cate} OR HN_SORT = #{cate} OR HN_GENDER = #{cate} OR HN_FINAL_EDU = #{cate} OR HN_CAREER = #{cate}
			</foreach>
		</if>
	</select>
	
	<select id="selectOne" parameterType="_int" resultMap="hireNotiResult">
		SELECT A.*, C.COMPANY_NAME CNAME FROM HIRENOTI A LEFT JOIN C_MEMBER B ON (A.CMEMBERID = B.CMEMBERID) LEFT JOIN COMPANY C ON (B.CID = C.COMPANY_NO) WHERE HN_SEQ = #{no}
	</select>
	
	<resultMap type="hireNoti" id="hireNotiResult">
      <id property="hnSeq" column="hn_seq"/>
      <result property="cMemberId" column="cmemberid"/>
      <result property="hnSort" column="hn_sort" typeHandler="strArr"/>
      <result property="hnCareer" column="hn_career"/>
      <result property="hnForm" column="hn_form"/>
      <result property="hnRecruit" column="hn_recruit"/>
      <result property="hnCate" column="hn_cate"/>
      <result property="hnChargeTask" column="hn_chargetask"/>
      <result property="hnDept" column="hn_dept"/>
      <result property="hnRankPosition" column="hn_rank_position"/>
      <result property="hnFinalEdu" column="hn_final_edu" typeHandler="strArr"/>
      <result property="hnMajor" column="hn_major"/>
      <result property="hnPreference" column="hn_preference"/>
      <result property="hnGender" column="hn_gender"/>
      <result property="hnBirth" column="hn_birth" typeHandler="strArr"/>
      <result property="hnSal" column="hn_sal"/>
      <result property="hnWorkPlace" column="hn_work_place"/>
      <result property="hnDay" column="hn_day"/>
      <result property="hnStime" column="hn_stime"/>
      <result property="hnDtime" column="hn_dtime"/>
      <result property="startDate" column="startdate"/>
      <result property="endDate" column="enddate"/>
      <result property="hnEve" column="hn_eve" typeHandler="strArr"/>
      <result property="hnReMethod" column="hn_remethod"/>
      <result property="hnProcess" column="hn_process"/>
      <result property="hnDoc" column="hn_doc"/>
      <result property="hnInterview" column="hn_interview"/>
      <result property="hnTitle" column="hn_title"/>
      <result property="addDate" column="hn_adddate"/>
      <result property="cName" column="cname"/>
   </resultMap>
	
	
</mapper>
